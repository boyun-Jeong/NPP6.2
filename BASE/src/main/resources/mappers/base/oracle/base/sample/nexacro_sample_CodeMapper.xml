<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.base.sample.dao.UiAdapterCodeDAO">
    <resultMap id="groupCode" type="com.base.com.vo.GroupCodeVO">
        <result property="groupCd" column="GROUP_CD" />
        <result property="groupNm" column="GROUP_NM" />
        <result property="useFg" column="USE_FG" />
        <result property="createUser" column="CREATE_USER" />
        <result property="createDt" column="CREATE_DT" />
        <result property="updateUser" column="UPDATE_USER" />
        <result property="updateDt" column="UPDATE_DT" />
        <result property="groupDesc" column="GROUP_DESC" />
    </resultMap>
    
    <resultMap id="code" type="com.base.com.vo.CodeVO">
        <result property="codeCd" column="CODE_CD" />
        <result property="codeNm" column="CODE_NM" />
        <result property="codeSeq" column="CODE_SEQ" />
        <result property="groupCd" column="GROUP_CD" />
        <result property="useFg" column="USE_FG" />
        <result property="createUser" column="CREATE_USER" />
        <result property="createDt" column="CREATE_DT" />
        <result property="updateUser" column="UPDATE_USER" />
        <result property="updateDt" column="UPDATE_DT" />
        <result property="codeGbn" column="CODE_GBN" />
        <result property="codeDesc" column="CODE_DESC" />
    </resultMap>
    
	<!-- code -->
	<select id="selectCodeGroupList" parameterType="com.base.com.vo.GroupCodeVO" resultMap="groupCode">
            SELECT 
                A.GROUP_CD AS GROUP_CD, 
                A.GROUP_NM AS GROUP_NM, 
                A.GROUP_DESC AS GROUP_DESC, 
                A.USE_FG AS USE_FG, 
                A.CREATE_USER AS CREATE_USER, 
                A.CREATE_DT AS CREATE_DT, 
                A.UPDATE_USER AS UPDATE_USER,
                A.UPDATE_DT AS UPDATE_DT  
            FROM TB_CODEGROUP A
            <where>
                <if test="groupNm != null">
                    AND GROUP_NM LIKE '%' || #{groupNm} || '%'
                </if>
                <if test="groupCd != null">
                    AND GROUP_CD LIKE '%' || #{groupCd} || '%'
                </if>
            </where>
    </select>  
    
    <select id="selectCodeList" resultMap="code">
            SELECT 
                A.CODE_CD AS CODE_CD, 
                A.GROUP_CD AS GROUP_CD,
                A.CODE_NM AS CODE_NM, 
                A.CODE_DESC AS CODE_DESC, 
                A.CODE_GBN AS CODE_GBN, 
                A.CODE_SEQ AS CODE_SEQ, 
                A.USE_FG AS USE_FG, 
                A.CREATE_USER AS CREATE_USER, 
                A.CREATE_DT AS CREATE_DT, 
                A.UPDATE_USER AS UPDATE_USER,
                A.UPDATE_DT AS UPDATE_DT  
            FROM TB_CODE A
    </select>
    
    <insert id="insertCode" parameterType="com.base.com.vo.CodeVO">
       insert into TB_CODE (CODE_CD, GROUP_CD, CODE_NM, CODE_DESC, CODE_GBN, CODE_SEQ, USE_FG, CREATE_DT, CREATE_USER) values(#{codeCd},#{groupCd},#{codeNm},#{codeDesc},#{codeGbn},#{codeSeq},#{useFg},#{createDt},#{createUser});
    </insert>
    
    <update id="updateCode" parameterType="com.base.com.vo.CodeVO">
      	UPDATE TB_CODE 
		SET CODE_NM=#{codeNm}
			, GROUP_CD=#{groupCd}
			, CODE_DESC=#{codeDesc}
			, CODE_GBN=#{codeGbn}
			, CODE_SEQ=#{codeSeq}
			, USE_FG=#{useFg}
			, UPDATE_DT=now()
			, UPDATE_USER=#{updateUser}
		WHERE CODE_CD=#{codeCd}
    </update>
    
     <delete id="deleteCode" parameterType="com.base.com.vo.CodeVO">
      	DELETE FROM TB_CODE 
			WHERE CODE_CD=#{codeCd}
    </delete>  
    
    <insert id="insertGroupCode" parameterType="com.base.com.vo.GroupCodeVO">
       insert into TB_CODEGROUP (GROUP_CD, GROUP_NM, GROUP_DESC, USE_FG, CREATE_DT, CREATE_USER) values(#{groupCd},#{groupNm},#{groupDesc},#{useFg},#{createDt},#{createUser});
    </insert>
    
    <update id="updateGroupCode" parameterType="com.base.com.vo.GroupCodeVO">
      	UPDATE TB_CODEGROUP 
		SET GROUP_NM=#{groupNm}
			, GROUP_DESC=#{groupDesc}
			, USE_FG=#{useFg}
			, UPDATE_DT=now()
			, UPDATE_USER='test'
		WHERE GROUP_CD=#{groupCd}
    </update>
    
     <delete id="deleteGroupCode" parameterType="com.base.com.vo.GroupCodeVO">
      	DELETE FROM TB_CODEGROUP
			WHERE GROUP_CD=#{groupCd}
    </delete>  
</mapper>