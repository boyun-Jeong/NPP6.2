<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.base.sample.dao.UiAdapterUserDAO">
    
    <select id="selectUserInfo" parameterType="java.util.Map" resultType="java.util.Map">
            SELECT
                USER_ID ,
                USER_NAME,
                EN_NAME,
                COMP_PHONE,
                PHONE,
                CELL_PHONE,
                COMPANY,
                JOB_POSITION,
                ASSIGNMENT,
                OFFICER_YN,
                FAX,
                ZIP_CODE,
                ADDRESS,
                COMP_ZIP_CODE,
                COMP_ADDRESS,
                EMAIL,
                DEPT_ID,
                PASSWORD
            FROM TB_USER
            <where>
	            <if test="searchKeyword != null">
	                <if test="searchCondition == 'NAME'">
	                    AND USER_NAME LIKE '%' || #{searchKeyword} || '%'
	                </if>
	                <if test="searchCondition == 'ID'">
	                    AND USER_ID LIKE '%' || #{searchKeyword} || '%' 
	                </if>
	            </if>
            </where>
    </select>
    
    <select id="selectUserInfoWithVo" parameterType="com.base.com.vo.UserVO" resultType="com.base.com.vo.UserVO">
            SELECT
                USER_ID ,
                USER_NAME,
                EN_NAME,
                COMP_PHONE,
                PHONE,
                CELL_PHONE,
                COMPANY,
                JOB_POSITION,
                ASSIGNMENT,
                OFFICER_YN,
                FAX,
                ZIP_CODE,
                ADDRESS,
                COMP_ZIP_CODE,
                COMP_ADDRESS,
                EMAIL,
                DEPT_ID,
                PASSWORD
            FROM TB_USER
            <where>
	            <if test="searchKeyword != null">
	                <if test="searchCondition == 'NAME'">
	                    AND USER_NAME LIKE '%' || #{searchKeyword} || '%'
	                </if>
	                <if test="searchCondition == 'ID'">
	                    AND USER_ID LIKE '%' || #{searchKeyword} || '%' 
	                </if>
	            </if>
            </where>
    </select>
    
    <insert id="insertUserInfo" parameterType="java.util.Map">
            INSERT INTO TB_USER (
                USER_ID,
                PASSWORD,
                USER_NAME,
                EN_NAME,
                COMP_PHONE,
                EMAIL,
                PHONE,
                CELL_PHONE,
                ZIP_CODE
            ) VALUES (
                #{userId},
                #{password},
                #{userName},
                #{enName},
                #{compPhone},
                #{email},
                #{phone},
                #{cellPhone},
                #{zipCode}
            )
    </insert>
    
    <update id="updateUserInfo" parameterType="java.util.Map">
            UPDATE TB_USER 
            SET USER_NAME=#{userName}
                , EN_NAME=#{enName}
            WHERE USER_ID=#{userId}
    </update>
    
    <update id="deleteUserInfo" parameterType="java.util.Map">
            UPDATE TB_USER 
            SET USER_NAME=#{userName}
                , EN_NAME=#{enName}
            WHERE USER_ID=#{userId}
    </update>
</mapper>
