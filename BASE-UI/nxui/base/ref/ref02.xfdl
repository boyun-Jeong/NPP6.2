<?xml version="1.0" encoding="utf-8"?>
<FDL version="2.1">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="ref02" classname="ref02" left="0" top="0" width="1840" height="720" titletext="Transaction[ Ex.core.tran ]" onload="form_onload">
    <Layouts>
      <Layout>
        <TextArea id="TextArea01" taborder="1" value="- ref::ref02.xfdl &#13;&#10;&#13;&#10;&#9;1. Transaction처리를 위한 API : Ex.core.tran&#13;&#10;&#13;&#10;&#9;Ex.core.tran(&#13;&#10;&#9;&#9;&#9;&#9;this,&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// transaction 실행스코프&#13;&#10;&#9;&#9;&#9;&#9;&quot;selectSample&quot;,&#9;&#9;&#9;&#9;&#9;&#9;// transaction 서비스 실행 ID / 콜백에서 수신할 서비스ID&#13;&#10;&#9;&#9;&#9;&#9;&quot;cmm/selectSample&quot;,&#9;&#9;&#9;&#9;// 서비스명( 서비스 호출 Url, 컨트롤명을 서비스ID로 지정)&#13;&#10;&#9;&#9;&#9;&#9;&quot;dsCond=dsCond:U&quot;,&#9;&#9;&#9;&#9;&#9;// 서버로 전송할 데이타셋&#13;&#10;&#9;&#9;&#9;&#9;&quot;dsSample=dsSample dsList=dsList&quot;&#9;// 서버에서 수신할 데이타셋&#13;&#10;&#9;&#9;&#9;&#9;);&#13;&#10;&#13;&#10;&#9;transaction 실행스코프 : 스크립트를 기술하는 scope의 this&#13;&#10;&#9;transaction 서비스 실행 ID : transaction을 구분하는 아이디이며, 콜백에서 수신할 서비스ID명&#13;&#10;&#9;서비스명 : 자바서비스명( 서비스 호출 Url, 컨트롤명을 서비스ID로 지정)&#13;&#10;&#9;서버로 전송할 데이타셋 : 서버로 전송할 데이타셋명 &#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9; 2개 이상의 데이타셋 전송시는 space하나를 구분자로 한다.&#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9; 서버수신용=클라이언트용&#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9; transaction이 실행하는 scope인 this에 존재하는 데이타셋을 기술&#13;&#10;&#9;서버에서 수신할 데이타셋 : 서버에서 수신할 데이타셋명&#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;2개 이상의 데이타셋 전송시는 space하나를 구분자로 한다.&#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;클라이언트수신용=서버발신용&#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;transaction이 실행하는 scope인 this에 존재하는 데이타셋을 기술&#13;&#10;&#13;&#10;&#9;2. Transaction 콜백처리를 위한 함수 : this.fnCallback&#13;&#10;&#9;this.fnCallback는 약속된 transaction용 콜백함수&#13;&#10;&#9;&#13;&#10;&#9;콜백함수의 인자&#13;&#10;&#9;sSvcId : Ex.core.tran 호출시 지정한 서비스ID&#13;&#10;&#9;nErrorCode : &lt;0 이면 서비스 오류, 그외 성공&#13;&#10;&#9;sErrorMsg : 서버에서 보내는 메시지&#13;&#10;&#9;&#13;&#10;&#9;오류발생시 아래와 같이 처리한다.&#13;&#10;&#9;&#13;&#10;&#9;참고 : &#9;Ex.core.error에서 지정한 'error'는 메시지아이디&#13;&#10;&#9;&#9;&#9;필요시 메시지콜백에서 메세지 아이디로 구분하여 처리&#13;&#10;&#13;&#10;&#9;*자세한 처리는 스크립트를 참조" readonly="true" left="5" top="45" style="color:red;font:bold 9 Gulim;" right="5" bottom="5"/>
        <Button id="btnSearch" taborder="2" text="조회" top="5" right="5" height="34" onclick="btnSearch_onclick" width="100"/>
      </Layout>
    </Layouts>
    <Objects/>
    <Script type="xscript5.1"><![CDATA[/***********************************************************************************
* 화면(명)		︰ Transation Sample
* 메뉴(경로)	︰ 공통
* 화면 설명	︰ 
* 작성자		︰ WEMB
* 작성일		︰ 
* 수정이력		︰
*------------------------------------------------------------------
* 수정일		작성자		이력
*------------------------------------------------------------------
* 2023.04.00	WEMB		최초작성
*------------------------------------------------------------------
***********************************************************************************/
/***********************************************************************************
 * Script Include 
 ***********************************************************************************/

/***********************************************************************************
 * Form Variable
 ***********************************************************************************/

/***********************************************************************************
 * Form Function
 ***********************************************************************************/
this.form_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	// 화면 초기 세팅
	// 이외는 기술하지 말것
	this.gfnFormOnLoad(obj, this.fnInit);
}

this.fnInit = function()
{
	// 폼 로드시 필요한 기술사항은 this.fnInit에서 기술할것
	trace("workArea form init call");
}

// 필요시 폼관련 이벤트는 여기 추가
/***********************************************************************************
 * Common Function
 ***********************************************************************************/
// 조회
this.fnSearch = function()
{
}

// 저장
this.fnSave = function()
{
	trace("fnSave call");
}

/***********************************************************************************
 * CallBack Event 
 ***********************************************************************************/
// Transaction 디폴트 콜백함수
/*
	Transaction 콜백처리를 위한 함수 : this.fnCallback
	this.fnCallback는 약속된 transaction용 콜백함수
	
	콜백함수의 인자
	sSvcId : Ex.core.tran 호출시 지정한 서비스ID
	nErrorCode : <0 이면 서비스 오류, 그외 성공
	sErrorMsg : 서버에서 보내는 메시지
	
	오류발생시 아래와 같이 처리한다.
	
	참고 : 	Ex.core.error에서 지정한 'error'는 메시지아이디
			필요시 메시지콜백에서 메세지 아이디로 구분하여 처리
*/
this.fnCallback = function (sSvcId, nErrorCode, sErrorMsg)
{
	// 에러메세지 처리
	if (nErrorCode < 0) 
	{
		Ex.core.error(this,"ERROR",sSvcId+"::"+nErrorCode+"::"+sErrorMsg);
		return;
	}
			
	// 각 Transaction별 CallBack 처리
	switch (sSvcId)
	{		
		case "ABOUT" : // 서비스 ID
			break;	
	}
}

// 팝업 디폴트 콜백함수
this.fnPopupAfter = function(pID,varValue)
{
	// TO DO
	// 개발자가 지정한 pID(팝업창ID) , varValue(팝업창 반환값)
}

// alert/confirm/error 메시지창 디폴트 콜백함수
this.fnMsgAfter = function(mID,varValue)
{
	// TO DO
	// 개발자가 지정한 mID(메시지창ID) , varValue(메시지창 반환값)
	// alert/error : 무조건 true 반환
	// confirm     : true/false 선택적 반환
}

/***********************************************************************************
 * User Function
 ***********************************************************************************/

/***********************************************************************************
 * Component Event
 ***********************************************************************************/
this.btnSearch_onclick = function(obj:Button, e:nexacro.ClickEventInfo)
{
	// 가이드를 위한 샘폴코드(오류발생);
	
	// 기본문법
	Ex.core.tran(
		this,								// transaction 실행스코프
		"selectSample",						// transaction 서비스 실행 ID / 콜백에서 수신할 서비스ID
		"cmm/selectSample.do",				// 서비스명
		"dsCond=dsCond:U",					// 서버로 전송할 데이타셋
		"dsSample=dsSample dsList=dsList"	// 서버에서 수신할 데이타셋
	);

	Ex.core.tran(
		this,								// transaction 실행스코프
		"selectSample1",						// transaction 서비스 실행 ID / 콜백에서 수신할 서비스ID
		"cmm/selectSample.do",				// 서비스명
		"dsCond=dsCond:U",					// 서버로 전송할 데이타셋
		"dsSample=dsSample dsList=dsList"	// 서버에서 수신할 데이타셋
	);

	Ex.core.tran(
		this,								// transaction 실행스코프
		"selectSample2",						// transaction 서비스 실행 ID / 콜백에서 수신할 서비스ID
		"cmm/selectSample.do",				// 서비스명
		"dsCond=dsCond:U",					// 서버로 전송할 데이타셋
		"dsSample=dsSample dsList=dsList"	// 서버에서 수신할 데이타셋
	);
	
	/*
	Transaction처리를 위한 API : Ex.core.tran

	Ex.core.tran(
				this,								// transaction 실행스코프
				"selectSample",						// transaction 서비스 실행 ID / 콜백에서 수신할 서비스ID
				"cmm/selectSample.do",				// 서비스명( 서비스 호출 Url, 컨트롤명을 서비스ID로 지정)
				"dsCond=dsCond:U",					// 서버로 전송할 데이타셋
				"dsSample=dsSample dsList=dsList"	// 서버에서 수신할 데이타셋
				);

	transaction 실행스코프 : 스크립트를 기술하는 scope의 this
	transaction 서비스 실행 ID : transaction을 구분하는 아이디이며, 콜백에서 수신할 서비스ID명
	서비스명 : 자바서비스명( 서비스 호출 Url, 컨트롤명을 서비스ID로 지정)
	서버로 전송할 데이타셋 : 서버로 전송할 데이타셋명 
							 2개 이상의 데이타셋 전송시는 space하나를 구분자로 한다.
							 서버수신용=클라이언트용
							 transaction이 실행하는 scope인 this에 존재하는 데이타셋을 기술
	서버에서 수신할 데이타셋 : 서버에서 수신할 데이타셋명
								2개 이상의 데이타셋 전송시는 space하나를 구분자로 한다.
								클라이언트수신용=서버발신용
								transaction이 실행하는 scope인 this에 존재하는 데이타셋을 기술
	*/	
}]]></Script>
  </Form>
</FDL>
